{{%FILTERS}}

<form action="" method="post" class="form-horizontal">
	{{#error}}
		<div class="alert alert-block alert-error">
			<button class="close" data-dismiss="alert" type="button">&times;</button>
			<h4 class="alert-heading">Erreur</h4>
			<p>Une erreur est survenue lors du traitement de la requ&ecirc;te : {{error}}.</p>
		</div>
	{{/error}}

	<div class="control-group">
		<label class="control-label" for="post-name">Nom unique du billet</label>
		<div class="controls">
			<input type="text" name="post-name" id="post-name" value="{{post.name}}" placeholder="Nom" pattern="[A-Za-z0-9_.\-]+" required class="input-xlarge"><span class="help-inline">(appara&icirc;tra dans le lien du billet)</span>
			<span class="help-block">Seuls les caract&egrave;res alphanum&eacute;riques et les suivants sont accept&eacute;s : &laquo;_, -, . &raquo;.</span>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="post-title">Titre du billet</label>
		<div class="controls">
			<input type="text" name="post-title" id="post-title" value="{{post.title}}" placeholder="Titre" required class="input-xxlarge">
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="post-tags">Tags</label>
		<div class="controls">
			<input type="text" name="post-tags" id="post-tags" value="{{post.tags | join}}" placeholder="Tags séparés par des virgules" class="input-xxlarge">
		</div>
	</div>
	<div class="control-group">
		<div class="controls">
			<label class="checkbox">
				<input type="checkbox" name="post-is-draft" id="post-is-draft" {{#post.isDraft}}checked{{/post.isDraft}}> Garder ce billet comme brouillon
			</label>
		</div>
	</div>

	<div class="editor-html5">
		<label>Contenu du billet</label>
		<div class="toolbar-container">
			<div class="btn-toolbar">
				<div class="pull-right">
					<div class="btn-group">
						<button class="btn dropdown-toggle" data-toggle="dropdown">Mode : <span class="editor-currentMode">WYSIWYG</span> <span class="caret"></span></button>
						<ul class="dropdown-menu">
							<li><a tabindex="-1" href="#" data-cmd="switchMode" data-arg="wysiwyg">WYSIWYG</a></li>
							<li><a tabindex="-1" href="#" data-cmd="switchMode" data-arg="html">HTML</a></li>
						</ul>
					</div>
				</div>

				<div class="toolbar-wysiwyg">
					<div class="btn-group">
						<button class="btn" title="Titre de niveau 1" data-cmd="formatBlock" data-arg="<h1>">h1</button>
						<button class="btn" title="Titre de niveau 2" data-cmd="formatBlock" data-arg="<h2>">h2</button>
						<button class="btn" title="Titre de niveau 3" data-cmd="formatBlock" data-arg="<h3>">h3</button>
						<button class="btn" title="Paragraphe" data-cmd="formatBlock" data-arg="<p>">p</button>
					</div>
					<div class="btn-group">
						<button class="btn" title="Gras" data-cmd="bold"><i class="icon-bold"></i></button>
						<button class="btn" title="Italique" data-cmd="italic"><i class="icon-italic"></i></button>
						<button class="btn" title="Effacer le formatage" data-cmd="removeFormat"><i class="icon-ban-circle"></i></button>
					</div>
					<div class="btn-group">
						<button class="btn" title="Image" data-cmd="insertCustomImage"><i class="icon-picture"></i></button>
						<button class="btn" title="Lien" data-cmd="createCustomLink"><i class="icon-globe"></i></button>
					</div>
					<div class="btn-group">
						<button class="btn" title="Liste" data-cmd="insertUnorderedList"><i class="icon-list"></i></button>
						<button class="btn dropdown-toggle" data-toggle="dropdown">
							<span class="caret"></span>
						</button>
						<ul class="dropdown-menu">
							<li><a tabindex="-1" href="#" data-cmd="insertUnorderedList">Liste non ordonn&eacute;e</a></li>
							<li><a tabindex="-1" href="#" data-cmd="insertOrderedList">Liste ordonn&eacute;e</a></li>
						</ul>
					</div>
					<div class="btn-group">
						<button class="btn" title="Citation" data-cmd="formatBlock" data-arg="<blockquote>"><i class="icon-comment"></i></button>
						<button class="btn" title="S&eacute;parateur" data-cmd="insertHorizontalRule">—</button>
						<button class="btn" title="Code HTML" data-cmd="insertCustomHTML">&lt;&gt;</button>
					</div>
					<div class="btn-group">
						<button class="btn" title="Annuler" data-cmd="undo"><i class="icon-chevron-left"></i></button>
						<button class="btn" title="Refaire" data-cmd="redo"><i class="icon-chevron-right"></i></button>
					</div>
					<div class="btn-group">
						<button class="btn dropdown-toggle" data-toggle="dropdown" title="Formatage avanc&eacute;"><span class="caret"></span></button>
						<ul class="dropdown-menu">
							<li class="dropdown-submenu"><a tabindex="-1" href="#"><i class="icon-align-left"></i> Alignement</a>
								<ul class="dropdown-menu">
									<li><a tabindex="-1" href="#" data-cmd="justifyLeft"><i class="icon-align-left"></i> Align&eacute; &agrave; gauche</a></li>
									<li><a tabindex="-1" href="#" data-cmd="justifyCenter"><i class="icon-align-center"></i> Align&eacute; au centre</a></li>
									<li><a tabindex="-1" href="#" data-cmd="justifyRight"><i class="icon-align-right"></i> Align&eacute; &agrave; droite</a></li>
									<li><a tabindex="-1" href="#" data-cmd="justifyFull"><i class="icon-align-justify"></i> Justifi&eacute;</a></li>
								</ul>
							</li>
							<li class="dropdown-submenu"><a tabindex="-1" href="#"><i class="icon-font"></i> Police</a>
								<ul class="dropdown-menu">
									<li><a tabindex="-1" href="#" data-cmd="fontName" data-arg="arial">Arial</a></li>
									<li><a tabindex="-1" href="#" data-cmd="fontName" data-arg="cantarell">Cantarell</a></li>
									<li><a tabindex="-1" href="#" data-cmd="fontName" data-arg="courier">Courier</a></li>
									<li><a tabindex="-1" href="#" data-cmd="fontName" data-arg="cursive">Cursive</a></li>
									<li><a tabindex="-1" href="#" data-cmd="fontName" data-arg="times">Times</a></li>
								</ul>
							</li>
							<li class="dropdown-submenu"><a tabindex="-1" href="#"><i class="icon-text-height"></i> Taille</a>
								<ul class="dropdown-menu">
									<li><a tabindex="-1" href="#" data-cmd="fontsize" data-arg="1">Tr&egrave;s petit</a></li>
									<li><a tabindex="-1" href="#" data-cmd="fontsize" data-arg="2">Petit</a></li>
									<li><a tabindex="-1" href="#" data-cmd="fontsize" data-arg="3">Normal</a></li>
									<li><a tabindex="-1" href="#" data-cmd="fontsize" data-arg="4">Grand</a></li>
									<li><a tabindex="-1" href="#" data-cmd="fontsize" data-arg="5">Tr&egrave;s grand</a></li>
								</ul>
							</li>
							<li class="dropdown-submenu"><a tabindex="-1" href="#"><i class="icon-adjust"></i> Couleur</a>
								<ul class="dropdown-menu">
									<li><a tabindex="-1" href="#" data-cmd="forecolor" data-arg="red">Rouge</a></li>
									<li><a tabindex="-1" href="#" data-cmd="forecolor" data-arg="blue">Bleu</a></li>
									<li><a tabindex="-1" href="#" data-cmd="forecolor" data-arg="green">Vert</a></li>
								</ul>
							</li>
							<li><a tabindex="-1" href="#" data-cmd="underline">Soulign&eacute;</a></li>
							<li><a tabindex="-1" href="#" data-cmd="strikeThrough">Barr&eacute;</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="editor-inner editor-wysiwyg uneditable-input" contenteditable="true">{{{post.content}}}</div>
		<textarea name="post-content" id="post-content" class="editor-inner editor-html">{{{post.content}}}</textarea>
	</div>

	<div class="form-actions">
		<button type="submit" class="btn btn-primary">Valider</button>
		<a class="btn" href="{{#buildUrl}}main showModule blog{{/buildUrl}}">Annuler</a>
	</div>
</form>

<!-- Editor modals -->
<div id="editor-modal-insertCustomHTML" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3>Ins&eacute;rer du code HTML</h3>
	</div>
	<div class="modal-body">
		<label>Code HTML<br />
			<textarea id="insertCustomHTML-content" rows="10" class="input-block-level" required></textarea>
		</label>
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" data-target="#editor-modal-insertCustomHTML">Annuler</button>
		<button class="btn btn-primary">Valider</button>
	</div>
</div>

<div id="editor-modal-createCustomLink" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3>Ins&eacute;rer un lien</h3>
	</div>
	<div class="modal-body">
		<label>Lien
			<input type="url" id="createCustomLink-content" class="input-block-level" required>
		</label>
		<label>Texte <span class="help-inline">(facultatif)</span>
			<input type="text" id="createCustomLink-text" class="input-block-level">
		</label>
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" data-target="#editor-modal-createCustomLink">Annuler</button>
		<button class="btn btn-primary">Valider</button>
	</div>
</div>

<div id="editor-modal-insertCustomImage" class="modal hide fade">
	<form id="insertCustomImage-form" action="" method="post" enctype="multipart/form-data">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			<h3>Insérer une image</h3>
		</div>
		<div class="modal-body">
			<p>Entrez l'URL de l'image ou sélectionnez-la depuis votre ordinateur.</p>
			<label>Lien vers l'image<br />
				<input type="url" id="insertCustomImage-url" class="input-block-level">
			</label>
			<label>
				Image(s) à envoyer<br />
				<input type="file" id="insertCustomImage-file" accept="image/*" multiple>
			</label>
			<hr />
			<label>
				Légende <span class="muted">(facultatif)</span><br />
				<input type="text" id="insertCustomImage-caption" class="input-block-level">
			</label>

			<ul class="thumbnails"></ul>
		</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal" data-target="#editor-modal-insertCustomImage">Annuler</button>
			<input type="submit" value="Valider" class="btn btn-primary">
		</div>
	</form>
</div>